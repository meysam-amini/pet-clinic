version: 2.1

orbs:
  maven: circleci/maven@0.0.12

workflows:
  maven_test:
    jobs:
    - maven/test # checkout, build, test, and upload test results
build:

working_directory: ~/tmp
docker:
- image: circleci/openjdk:8-jdk-browsers

steps:

- checkout

# Download and cache dependencies
- restore_cache:
    keys:
    - v1-dependencies-{{ checksum "pom.xml" }}
    # fallback to using the latest cache if no exact match is found
    - v1-dependencies-

- run: mvn clean install

- save_cache:
    paths:
    - ~/.m2
    key: v1-dependencies-{{ checksum "pom.xml" }}